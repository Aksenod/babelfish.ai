<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Babelfish.ai</title>
    <script>
      // GitHub Pages SPA redirect
      // Когда GitHub Pages не находит страницу (например, /babelfish.ai/session/123),
      // этот скрипт перенаправляет на главную страницу с параметром ?p=, содержащим исходный путь
      // Скрипт в index.html затем восстановит правильный путь для React Router
      (function() {
        const pathSegmentsToKeep = 1; // /babelfish.ai — оставляем 1 сегмент базового пути (basename)
        const currentLocation = window.location;
        
        // Извлекаем путь после basename (например, "session/123" из "/babelfish.ai/session/123")
        const pathAfterBase = currentLocation.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/');
        
        // Формируем базовый путь (например, "/babelfish.ai")
        const basePath = currentLocation.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/');
        
        // Перенаправляем на главную с параметром ?p=, содержащим исходный путь
        const redirect = currentLocation.origin + basePath + 
          '/?p=' + encodeURIComponent(
            pathAfterBase + 
            currentLocation.search + 
            currentLocation.hash
          );
        
        currentLocation.replace(redirect);
      })();
    </script>
  </head>
  <body>
    <noscript>
      <p>Для работы приложения требуется JavaScript</p>
    </noscript>
  </body>
</html>
